(jbuild_version 1)

(executable
 ((name node_main)
  (public_name tezos-node)
  (package tezos)
  (libraries (tezos-base
              node_db node_main_lib node_net cmdliner
              tezos-embedded-protocol-genesis
              tezos-embedded-protocol-demo
              tezos-embedded-protocol-alpha))
  (flags (:standard -w -9+27-30-32-40@8
                    -safe-string
                    -open Tezos_base__TzPervasives
                    -linkall))
  (modules (Node_main))))

(executable
 ((name client_main)
  (public_name tezos-client)
  (package tezos)
  (libraries (tezos-base client_lib
              client_embedded_genesis
              client_embedded_alpha))
  (flags (:standard -w -9+27-30-32-40@8
                    -safe-string
                    -open Tezos_base__TzPervasives
                    -linkall))
  (modules (Client_main))))

(alias
 ((name runtest_indent)
  (deps ((glob_files *.ml) (glob_files *.mli)))
  (action (run bash ${libexec:tezos-stdlib:test-ocp-indent.sh} ${<}))))
